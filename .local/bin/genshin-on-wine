# 1. Specify the path to wine(64)
#    This can be either system-wide or a custom installation
#WINE="/usr/share/steam/compatibilitytools.d/proton-ge-custom/files/bin/wine64"
WINE="/usr/share/steam/compatibilitytools.d/proton-6.16-GE-1/files/bin/wine64"
#WINE="/usr/share/steam/compatibilitytools.d/proton-6.13-GE-1/files/bin/wine64"
#WINE="/archive/games/SteamLibrary/steamapps/common/Proton 6.3/dist/bin/wine64"

RESOLUTION=1920x1080

#LANG=C

# get the right wine libs
winebindir=$(dirname $WINE)

if [ -z "$PATH" ]; then
  PATH="$winebindir"
else
  PATH="$winebindir:$PATH"
fi

if [ -z "$LD_LIBRARY_PATH" ]; then
  LD_LIBRARY_PATH="$winebindir/../lib64:$winebindir/../lib:$winebindir/../lib32"
else
  LD_LIBRARY_PATH="$winebindir/../lib64:$winebindir/../lib:$winebindir/../lib32:$LD_LIBRARY_PATH"
fi

export vblank_mode=0
export __GL_SYNC_TO_VBLANK=0

export ENABLE_VKBASALT=1
export VKBASALT_LOG_FILE="vkBasalt.log"

export DXVK_ASYNC=1
export WINEESYNC=1
export WINEFSYNC=0
export WINEDEBUG=fixme-all,err-all

# 1.4 Specify the path to the game folder
GENSHIN_INPACT="/archive/games/EpicLibrary/GenshinImpact"

# 2. Specify a WINEPREFIX
export WINEPREFIX="/home/archer/.local/share/wineprefixes/genshin"

# 3. Create or update WINEPREFIX
# "$WINE" wineboot -u

# 4. Install DXVK (v1.9.0, for Wine 5.14+)
#    Use the newest Winetricks script from GitHub
# export WINE
# sh winetricks dxv

# 6. Game launch
cd "$GENSHIN_INPACT/Genshin Impact game"
# requires staging or Proton, see TWEAKS.md
# "$WINE" control
# exit
"$WINE" explorer /desktop=genshin,$RESOLUTION cmd /c launcher.bat
#gamemoderun "$WINE" GenshinImpact.exe
